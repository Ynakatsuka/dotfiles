[tools]
# Gemini CLI - Google AI CLI
gemini-cli = "latest"

# OpenAI Codex CLI
"npm:@openai/codex" = "latest"

# vsce - Visual Studio Code Extension CLI
"npm:@vscode/vsce" = "latest"

# bun - Bun package manager
bun = "latest"

# ni - use the right package manager
"npm:@antfu/ni" = "latest"

# python - Python runtime
python = "3.12"

# uv - Fast Python package installer and resolver
uv = "latest"

# rye - Python package manager
rye = "latest"

# ruff - Python code formatter and linter
ruff = "latest"

# Task - Task runner
task = "latest"

# typos - Source code spell checker
typos = "latest"

# Node.js - JavaScript runtime
node = "24.9"

# Volta - JavaScript tool manager
"aqua:volta-cli/volta" = "latest"

# Go - The Go programming language
go = "latest"

# Terraform - Infrastructure as Code
terraform = "latest"

# gh - GitHub CLI
gh = "latest"

# aws - AWS CLI
aws = "latest"

# gcloud - Google Cloud CLI
gcloud = "latest"

# fzf - Fuzzy Finder
fzf = "latest"

# eza - Modern replacement for ls
eza = "latest"

# ghq -
ghq = "latest"

# direnv - Directory-based environment management
direnv = "latest"

# k9s - Kubernetes CLI dashboard
k9s = "latest"

# dotenvx - Environment variable management
dotenvx = "latest"

# gopls - Go language server
"go:golang.org/x/tools/gopls" = { version = "latest" }

# sdf - SDF CLI
"ubi:sdf-labs/sdf-cli" = { version = "latest", matching = "sdf-*.tar.gz", exe = "sdf" }

[settings]
experimental = true
# Always use the latest version when running `mise up`
always_keep_download = false
always_keep_install = false
legacy_version_file = true
plugin_autoupdate_last_check_duration = "7 days"

[env]
GITHUB_TOKEN = "{{exec(command='GH=$(find ~/.local/share/mise/installs/gh -name gh -type f 2>/dev/null | head -1) && $GH auth token 2>/dev/null || true')}}"

[tasks.claude-viewer]
description = "Claude Code Viewer (port 50100)"
run = "npx @kimuson/claude-code-viewer@latest"
env = { PORT = "50100" }

[tasks.update-dotfile]
description = "Update dotfiles and development environment"
run = """
mise up && \
chezmoi update -v && \
mise cache clean
"""

[tasks.update-brew]
description = "Update Homebrew and all installed packages"
run = """
brew update && \
brew upgrade && \
brew upgrade --cask && \
brew cleanup -s && \
brew autoremove
"""

[tasks.maintenance]
description = "Update dotfiles, mise tools, and Homebrew packages"
run = """
mise up && \
chezmoi update -v && \
mise cache clean && \
if command -v brew >/dev/null 2>&1; then
  brew update && \
  brew upgrade && \
  brew upgrade --cask && \
  brew cleanup -s && \
  brew autoremove
else
  echo "[INFO] brew not found, skipping Homebrew updates"
fi
"""
